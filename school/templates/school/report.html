{% extends 'school/base.html' %}

{% block title %}Report for {{ student.name }}{% endblock %}

{% block content %}
<h2>Report for {{ student.name }} ({{ student.get_level_display }} - {{ student.get_class_year_display }})</h2>
<p><strong>Combination:</strong> {{ student.combination|default:"N/A" }}</p>
<h3>Subjects, Scores, Grades {% if student.level == 'A' %}, and Points{% endif %}</h3>
<table class="table table-bordered">
    <thead>
        <tr>
            <th>Subject</th>
            <th>Score</th>
            <th>Grade</th>
            {% if student.level == 'A' %}
            <th>Points</th>
            {% endif %}
        </tr>
    </thead>
    <tbody>
        {% for result in results %}
        <tr>
            <td>{{ result.subject.name }} {% if result.subject.is_subsidiary %}(Subsidiary){% endif %}</td>
            <td>{{ result.score }}</td>
            <td>{{ result.get_grade }}</td>
            {% if student.level == 'A' %}
            <td>{{ result.get_points }}</td>
            {% endif %}
        </tr>
        {% empty %}
        <tr><td colspan="{% if student.level == 'A' %}4{% else %}3{% endif %}">No results available.</td></tr>
        {% endfor %}
    </tbody>
</table>
{% if student.level == 'A' and results %}
<p><strong>Total Points:</strong> {{ student.total_points }} / 20</p>
{% endif %}
{% endblock %}