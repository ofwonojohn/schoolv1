{% extends 'school/base.html' %}

{% block title %}{{ object.name }}{% endblock %}

{% block content %}
<h2>{{ object.name }} ({{ object.get_level_display }})</h2>
<p><strong>ID:</strong> {{ object.student_id }}</p>
<p><strong>Class:</strong> {{ object.get_class_year_display }}</p>
<p><strong>Combination:</strong> {{ object.combination|default:"N/A" }}</p>
<h3>Subjects</h3>
<ul>
    {% for subject in object.subjects.all %}
    <li>{{ subject.name }}</li>
    {% empty %}
    <li>No subjects assigned.</li>
    {% endfor %}
</ul>
<a href="{% url 'assign_subjects' object.pk %}" class="btn btn-primary">Assign Subjects</a>
<h3>Results</h3>
<table class="table">
    <thead>
        <tr><th>Subject</th><th>Score</th></tr>
    </thead>
    <tbody>
        {% for result in object.result_set.all %}
        <tr><td>{{ result.subject.name }}</td><td>{{ result.score }}</td></tr>
        {% empty %}
        <tr><td colspan="2">No results.</td></tr>
        {% endfor %}
    </tbody>
</table>
<a href="{% url 'add_result' object.pk %}" class="btn btn-primary">Add Result</a>
<a href="{% url 'report' object.pk %}" class="btn btn-secondary">Generate Report</a>
{% endblock %}